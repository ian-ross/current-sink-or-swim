EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 3 3
Title "Programmable current sink (voltage control)"
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text HLabel 8700 3100 2    50   Input ~ 0
FET_GATE
Text HLabel 8700 4025 2    50   Output ~ 0
V_SENSE
$Comp
L power:GND #PWR?
U 1 1 5E6085EF
P 5200 4400
AR Path="/5E6085EF" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBC79/5E6085EF" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5E6085EF" Ref="#PWR0304"  Part="1" 
F 0 "#PWR0304" H 5200 4150 50  0001 C CNN
F 1 "GND" H 5205 4227 50  0000 C CNN
F 2 "" H 5200 4400 50  0001 C CNN
F 3 "" H 5200 4400 50  0001 C CNN
	1    5200 4400
	1    0    0    -1  
$EndComp
Text HLabel 3325 2600 0    50   Input ~ 0
I2C_SCL
Text HLabel 3325 2700 0    50   Input ~ 0
I2C_SDA
$Comp
L teensy-load:DAC6571 U?
U 1 1 5E6085F7
P 4275 2750
AR Path="/5E5EBC79/5E6085F7" Ref="U?"  Part="1" 
AR Path="/5E5EBE75/5E6085F7" Ref="U301"  Part="1" 
F 0 "U301" H 4375 3225 50  0000 L CNN
F 1 "DAC6571" H 4375 3125 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-6_Handsoldering" H 4275 2750 50  0001 C CNN
F 3 "http://www.ti.com/general/docs/suppproductinfo.tsp?distId=26&gotoUrl=http%3A%2F%2Fwww.ti.com%2Flit%2Fgpn%2Fdac6571" H 4275 2750 50  0001 C CNN
F 4 "DAC6571IDBVR" H 4275 2750 50  0001 C CNN "MPN"
	1    4275 2750
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5E6085FD
P 4275 2175
AR Path="/5E5EBC79/5E6085FD" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5E6085FD" Ref="#PWR0303"  Part="1" 
F 0 "#PWR0303" H 4275 2025 50  0001 C CNN
F 1 "+3.3V" H 4290 2348 50  0000 C CNN
F 2 "" H 4275 2175 50  0001 C CNN
F 3 "" H 4275 2175 50  0001 C CNN
	1    4275 2175
	1    0    0    -1  
$EndComp
Wire Wire Line
	4275 2350 4275 2275
Wire Wire Line
	3325 2600 3825 2600
Wire Wire Line
	3325 2700 3825 2700
Wire Wire Line
	3825 2900 3650 2900
Wire Wire Line
	5200 3300 5200 3475
Connection ~ 5200 3475
Wire Wire Line
	5200 3475 5200 3600
Wire Wire Line
	5200 3000 5200 2750
Wire Wire Line
	5200 2750 4725 2750
Text Notes 4925 2725 0    50   ~ 0
0-3.3V
Text Notes 5425 3450 0    50   ~ 0
0-2V
Text Notes 3050 3100 0    50   ~ 0
Other DAC6571\nhas A0 low
Wire Wire Line
	3650 2900 3650 2275
Wire Wire Line
	3650 2275 4275 2275
Connection ~ 4275 2275
Wire Wire Line
	4275 2275 4275 2175
$Comp
L Device:R R301
U 1 1 5E608A62
P 5200 3150
F 0 "R301" H 5270 3196 50  0000 L CNN
F 1 "39K" H 5270 3105 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 5130 3150 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/427/crcwce3-1762584.pdf" H 5200 3150 50  0001 C CNN
F 4 "CRCW040239K0FKEDC" H 5200 3150 50  0001 C CNN "MPN"
	1    5200 3150
	1    0    0    -1  
$EndComp
$Comp
L Device:R R302
U 1 1 5E608F1F
P 5200 3750
F 0 "R302" H 5270 3796 50  0000 L CNN
F 1 "27K" H 5270 3705 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 5130 3750 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/427/crcwce3-1762584.pdf" H 5200 3750 50  0001 C CNN
F 4 "CRCW120627K0FKEAC" H 5200 3750 50  0001 C CNN "MPN"
	1    5200 3750
	1    0    0    -1  
$EndComp
Text HLabel 8700 6175 2    50   Input ~ 0
IN-
Text HLabel 8700 5175 2    50   Input ~ 0
IN+
$Comp
L Device:R R307
U 1 1 5E60E589
P 8125 5425
F 0 "R307" H 8195 5471 50  0000 L CNN
F 1 "18K" H 8195 5380 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 8055 5425 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/418/NG_DS_9-1773463-9_A-1358566.pdf" H 8125 5425 50  0001 C CNN
F 4 "CRGP0805F18K" H 8125 5425 50  0001 C CNN "MPN"
	1    8125 5425
	1    0    0    -1  
$EndComp
$Comp
L Device:R R308
U 1 1 5E60E864
P 8125 5925
F 0 "R308" H 8195 5971 50  0000 L CNN
F 1 "2K" H 8195 5880 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 8055 5925 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/427/crcwce3-1762584.pdf" H 8125 5925 50  0001 C CNN
F 4 "CRCW08052K00FKEAC" H 8125 5925 50  0001 C CNN "MPN"
	1    8125 5925
	1    0    0    -1  
$EndComp
Wire Wire Line
	8125 5675 6175 5675
Wire Wire Line
	6175 3675 6575 3675
Text Notes 8200 5150 0    50   ~ 0
0-20V
Text Notes 7200 5650 0    50   ~ 0
0-2V
Wire Wire Line
	8125 6175 8700 6175
Wire Wire Line
	8125 5175 8700 5175
Wire Wire Line
	5200 3475 6575 3475
Text Notes 6200 2625 0    50   ~ 0
When device under test voltage exceeds maximum level\nset from DAC, FET gate current is sunk by op amp.
Wire Wire Line
	7550 4125 7675 4125
Wire Wire Line
	8125 5575 8125 5675
Connection ~ 8125 5675
Wire Wire Line
	8125 5675 8125 5775
Wire Wire Line
	8125 6175 8125 6075
Wire Wire Line
	8125 5275 8125 5175
$Comp
L Device:R R306
U 1 1 5E7D0474
P 7950 4700
F 0 "R306" V 7850 4575 50  0000 C CNN
F 1 "39K" V 7775 4600 50  0000 C CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 7880 4700 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/427/crcwce3-1762584.pdf" H 7950 4700 50  0001 C CNN
F 4 "CRCW040239K0FKEDC" H 7950 4700 50  0001 C CNN "MPN"
	1    7950 4700
	0    -1   -1   0   
$EndComp
Wire Wire Line
	7800 4700 7550 4700
$Comp
L Device:R R304
U 1 1 5E7D2755
P 7550 4925
F 0 "R304" H 7620 4971 50  0000 L CNN
F 1 "27K" H 7620 4880 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 7480 4925 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/427/crcwce3-1762584.pdf" H 7550 4925 50  0001 C CNN
F 4 "CRCW120627K0FKEAC" H 7550 4925 50  0001 C CNN "MPN"
	1    7550 4925
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5E7D3274
P 7550 5375
AR Path="/5E7D3274" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBC79/5E7D3274" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5E7D3274" Ref="#PWR0305"  Part="1" 
F 0 "#PWR0305" H 7550 5125 50  0001 C CNN
F 1 "GND" H 7555 5202 50  0000 C CNN
F 2 "" H 7550 5375 50  0001 C CNN
F 3 "" H 7550 5375 50  0001 C CNN
	1    7550 5375
	1    0    0    -1  
$EndComp
Text Notes 6525 5050 0    50   ~ 0
Amplification of 1.65\nhere gives full range\nADC input for sense\nvoltage range of 0-2V.
$Comp
L Device:R R303
U 1 1 5E7FA900
P 5200 4100
F 0 "R303" H 5270 4146 50  0000 L CNN
F 1 "33K" H 5270 4055 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 5130 4100 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/418/NG_DS_9-1773463-9_A-1358566.pdf" H 5200 4100 50  0001 C CNN
F 4 "CRGP0805F33K" H 5200 4100 50  0001 C CNN "MPN"
	1    5200 4100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5200 3950 5200 3900
Wire Wire Line
	5200 4250 5200 4325
Wire Wire Line
	4275 4325 5200 4325
Wire Wire Line
	4275 3150 4275 4325
Connection ~ 5200 4325
Wire Wire Line
	5200 4325 5200 4400
$Comp
L Device:R R305
U 1 1 5E7FE2C5
P 7550 5225
F 0 "R305" H 7620 5271 50  0000 L CNN
F 1 "33K" H 7620 5180 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 7480 5225 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/418/NG_DS_9-1773463-9_A-1358566.pdf" H 7550 5225 50  0001 C CNN
F 4 "CRGP0805F33K" H 7550 5225 50  0001 C CNN "MPN"
	1    7550 5225
	1    0    0    -1  
$EndComp
$Comp
L Device:D D301
U 1 1 5F356BB1
P 7400 3575
F 0 "D301" H 7400 3792 50  0000 C CNN
F 1 "1N914" H 7400 3701 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-123F" H 7400 3575 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/395/1N4148W_SERIES_K1804-1519318.pdf" H 7400 3575 50  0001 C CNN
F 4 "1N914BW RH" H 7400 3575 50  0001 C CNN "MPN"
	1    7400 3575
	1    0    0    -1  
$EndComp
$Comp
L teensy-load:TLV333IDBVR U?
U 1 1 5F3A1986
P 7975 4025
AR Path="/5E5EBC79/5F3A1986" Ref="U?"  Part="1" 
AR Path="/5E5EBE75/5F3A1986" Ref="U303"  Part="1" 
F 0 "U303" H 7950 3750 50  0000 L CNN
F 1 "TLV333IDBVR" H 7950 3850 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 7875 3825 50  0001 L CNN
F 3 "https://www.ti.com/lit/ds/symlink/tlv333.pdf" H 7975 4225 50  0001 C CNN
	1    7975 4025
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5F3A198C
P 7875 4325
AR Path="/5F3A198C" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBC79/5F3A198C" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5F3A198C" Ref="#PWR0113"  Part="1" 
F 0 "#PWR0113" H 7875 4075 50  0001 C CNN
F 1 "GND" H 7880 4152 50  0000 C CNN
F 2 "" H 7875 4325 50  0001 C CNN
F 3 "" H 7875 4325 50  0001 C CNN
	1    7875 4325
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5F3A1992
P 7875 3725
AR Path="/5E5EBC79/5F3A1992" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5F3A1992" Ref="#PWR0114"  Part="1" 
F 0 "#PWR0114" H 7875 3575 50  0001 C CNN
F 1 "+3.3V" H 7890 3898 50  0000 C CNN
F 2 "" H 7875 3725 50  0001 C CNN
F 3 "" H 7875 3725 50  0001 C CNN
	1    7875 3725
	1    0    0    -1  
$EndComp
Wire Wire Line
	8275 4025 8575 4025
Wire Wire Line
	7550 4125 7550 4700
Connection ~ 7550 4700
Wire Wire Line
	7550 4700 7550 4775
Wire Wire Line
	8575 4700 8575 4025
Wire Wire Line
	8100 4700 8575 4700
Connection ~ 8575 4025
Wire Wire Line
	8575 4025 8700 4025
Wire Wire Line
	7175 3575 7250 3575
Wire Wire Line
	7550 3575 7675 3575
Wire Wire Line
	7675 3575 7675 3100
Wire Wire Line
	7675 3100 8700 3100
$Comp
L Comparator:LMV331 U302
U 1 1 5F3ABAD8
P 6875 3575
F 0 "U302" H 6925 3325 50  0000 L CNN
F 1 "LMV331" H 6925 3425 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 6875 3675 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lmv331.pdf" H 6875 3775 50  0001 C CNN
	1    6875 3575
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5F3AC2D4
P 6775 3875
AR Path="/5F3AC2D4" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBC79/5F3AC2D4" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5F3AC2D4" Ref="#PWR0115"  Part="1" 
F 0 "#PWR0115" H 6775 3625 50  0001 C CNN
F 1 "GND" H 6780 3702 50  0000 C CNN
F 2 "" H 6775 3875 50  0001 C CNN
F 3 "" H 6775 3875 50  0001 C CNN
	1    6775 3875
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5F3AC70A
P 6775 3275
AR Path="/5E5EBC79/5F3AC70A" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5F3AC70A" Ref="#PWR0116"  Part="1" 
F 0 "#PWR0116" H 6775 3125 50  0001 C CNN
F 1 "+3.3V" H 6790 3448 50  0000 C CNN
F 2 "" H 6775 3275 50  0001 C CNN
F 3 "" H 6775 3275 50  0001 C CNN
	1    6775 3275
	1    0    0    -1  
$EndComp
Wire Wire Line
	6175 3675 6175 4200
Wire Wire Line
	7675 3925 7275 3925
Wire Wire Line
	7275 3925 7275 4200
Wire Wire Line
	7275 4200 6175 4200
Connection ~ 6175 4200
Wire Wire Line
	6175 4200 6175 5675
$Comp
L Device:C C?
U 1 1 5F3C59DE
P 2275 2725
AR Path="/5E5EBC79/5F3C59DE" Ref="C?"  Part="1" 
AR Path="/5E5EBE75/5F3C59DE" Ref="C303"  Part="1" 
F 0 "C303" H 2390 2771 50  0000 L CNN
F 1 "0.1U" H 2390 2680 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 2313 2575 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/445/885012207098-1727748.pdf" H 2275 2725 50  0001 C CNN
F 4 "885012207098" H 2275 2725 50  0001 C CNN "MPN"
	1    2275 2725
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5F3C59E4
P 1350 3025
AR Path="/5F3C59E4" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5F3C59E4" Ref="#PWR0302"  Part="1" 
F 0 "#PWR0302" H 1350 2775 50  0001 C CNN
F 1 "GND" H 1355 2852 50  0000 C CNN
F 2 "" H 1350 3025 50  0001 C CNN
F 3 "" H 1350 3025 50  0001 C CNN
	1    1350 3025
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5F3C59EB
P 1350 2725
AR Path="/5F3C59EB" Ref="C?"  Part="1" 
AR Path="/5E5EBE75/5F3C59EB" Ref="C301"  Part="1" 
F 0 "C301" H 1465 2771 50  0000 L CNN
F 1 "0.1U" H 1465 2680 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1388 2575 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/445/885012207098-1727748.pdf" H 1350 2725 50  0001 C CNN
F 4 "885012207098" H 1350 2725 50  0001 C CNN "MPN"
	1    1350 2725
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5F3C59F1
P 1350 2425
AR Path="/5F3C59F1" Ref="#PWR?"  Part="1" 
AR Path="/5E5EBE75/5F3C59F1" Ref="#PWR0301"  Part="1" 
F 0 "#PWR0301" H 1350 2275 50  0001 C CNN
F 1 "+3.3V" H 1365 2598 50  0000 C CNN
F 2 "" H 1350 2425 50  0001 C CNN
F 3 "" H 1350 2425 50  0001 C CNN
	1    1350 2425
	1    0    0    -1  
$EndComp
Wire Wire Line
	1350 2425 1350 2500
Wire Wire Line
	1350 2875 1350 2975
$Comp
L Device:C C?
U 1 1 5F3C59FA
P 1800 2725
AR Path="/5F3C59FA" Ref="C?"  Part="1" 
AR Path="/5E5EBE75/5F3C59FA" Ref="C302"  Part="1" 
F 0 "C302" H 1915 2771 50  0000 L CNN
F 1 "0.1U" H 1915 2680 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 1838 2575 50  0001 C CNN
F 3 "https://www.mouser.at/datasheet/2/445/885012207098-1727748.pdf" H 1800 2725 50  0001 C CNN
F 4 "885012207098" H 1800 2725 50  0001 C CNN "MPN"
	1    1800 2725
	1    0    0    -1  
$EndComp
Wire Wire Line
	1350 2500 1800 2500
Connection ~ 1350 2500
Wire Wire Line
	1350 2500 1350 2575
Connection ~ 1350 2975
Wire Wire Line
	1350 2975 1350 3025
Wire Wire Line
	1800 2500 1800 2575
Wire Wire Line
	1800 2875 1800 2975
Wire Wire Line
	1800 2975 1350 2975
Wire Wire Line
	1800 2975 2275 2975
Wire Wire Line
	2275 2975 2275 2875
Wire Wire Line
	2275 2500 1800 2500
Wire Wire Line
	2275 2575 2275 2500
Connection ~ 1800 2975
Connection ~ 1800 2500
$EndSCHEMATC
